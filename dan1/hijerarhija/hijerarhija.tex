%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem statement
\begin{statement}[
  problempoints=100,
  timelimit=1 sekunda,
  memorylimit=1024 MiB,
]{Hijerarhija}\

Bliže se lokalni izbori!

Prije promjene vlasti potrebno je podijeliti bonuse u jednom neimenovanom odjelu gradske uprave. Hijerarhiju uprave možemo predstaviti stablom u kojem je čvor $1$ označen kao direktor, a izravni šef svakog zaposlenika je njegov roditelj u stablu.

Ako $i$-ti zaposlenik dobije bonus u iznosu od barem $c_i$, njegova će se produktivnost u sljedećoj godini povećati za $p_i$, dok u suprotnom ostaje nepromijenjena. Nije nužno da svi zaposlenici dobiju bonus, ali za svakog zaposlenika koji dobije bonus mora vrijediti da je i njegov izravni šef dobio barem neki pozitivan bonus (makar u iznosu $1$).

Odredite najveće moguće povećanje ukupne produktivnosti odjela ako je ukupan iznos proračuna za bonuse najviše $K$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Input
\subsection*{Ulazni podaci}

U prvom retku su prirodni brojevi $N$ i $K$.

U drugom je retku $N - 1$ brojeva $s_i$ ($1 \leq s_i \leq i$) gdje $i$-ti broj označava izravnog šefa $i+1$-tog radnika.

U trećem je retku $N$ brojeva $p_1, p_2, \ldots, p_N$.

U četvrtom je retku $N$ brojeva $c_1, c_2, \ldots, c_N$. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Output
\subsection*{Izlazni podaci}

U jedini redak ispišite najveće moguće povećanje produktivnosti uz zadani proračun.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Scoring
\subsection*{Bodovanje}

U svim podzadacima vrijedi $2 \leq N \leq 5\,000$ i $1 \leq K \leq 5\,000$.

Za sve $i = 1, \dots, N$ vrijedi da je $1 \leq p_i \leq 10^5$ i $1 \leq c_i \leq 5\,000$.

{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{ccl}
   Podzadatak & Broj bodova & Ograničenja \\ \midrule
   	1 & 7 & $N \leq 20$ \\
    2 & 9 & $c_i = 1$ za sve $i$ i dodatno ako je $j$ šef od $i$ tada $p_j \geq p_i$. \\
    3 & 14 & Za sve $i < N$, izravan šef od $i + 1$ je $i$. \\
    4 & 19 & $N, K \leq 500$ \\
    5 & 21 & $N \leq 100$ \\
    6 & 30 & Nema dodatnih ograničenja. \\
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Examples
\subsection*{Probni primjeri}
\begin{tabularx}{\textwidth}{X'X'X}
\sampleinputs{test/hijerarhija.dummy.in.1}{test/hijerarhija.dummy.out.1} &
\sampleinputs{test/hijerarhija.dummy.in.2}{test/hijerarhija.dummy.out.2} &
\sampleinputs{test/hijerarhija.dummy.in.3}{test/hijerarhija.dummy.out.3}
\end{tabularx}

\textbf{Pojašnjenje drugog probnog primjera:}

Primjer valjane dodjele bonusa je sljedeći: zaposlenici dobiju redom $1$, $1$, $0$, $2$ i $3$ bonusa.

Dodjela $1$, $1$, $1$, $2$, $3$ nije valjana jer ukupni broj dodijeljenih bonusa premašuje dozvoljeni proračun.

Dodjela $0$, $1$, $1$, $2$, $3$ također nije valjana jer je zaposlenik $2$ dobio bonus, a njegov izravni šef nije.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% We're done
\end{statement}

%%% Local Variables:
%%% mode: latex
%%% mode: flyspell
%%% ispell-local-dictionary: "croatian"
%%% TeX-master: "../hio.tex"
%%% End:
